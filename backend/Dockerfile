# Задаем базовый образ для этапа сборки
FROM node:20-alpine as build
# Задаем рабочую директорию
WORKDIR /app
# Копируем список зависимостей и лок-файл отдельно от файлов проекта
# напомним, это нужно для кэширования установки зависимостей
COPY package*.json ./
# Устанавливаем зависимости
RUN npm i
COPY . .
RUN npm run build
EXPOSE 3000
# Команда для запуска
CMD ["node", "dist/src/main"]